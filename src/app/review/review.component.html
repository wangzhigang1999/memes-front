<div class=" w-full md:max-w-4xl mx-auto p-2 ">

  @if (!hasToken) {
    <div class="flex items-center justify-center h-[75vh] px-4">
      <div class="w-full max-w-lg bg-white shadow-lg rounded-2xl p-6 md:p-8 flex flex-col items-center gap-6">

        <!-- æ ‡é¢˜ -->
        <h2 class="text-2xl font-semibold text-gray-700">è¾“å…¥ Token</h2>
        <p class="text-gray-500 text-sm text-center">è¯·æä¾›æœ‰æ•ˆçš„ Token ä»¥ç»§ç»­æ“ä½œ</p>

        <!-- è¾“å…¥æ¡† -->
        <input
          type="text"
          placeholder="ç²˜è´´ä½ çš„ Token..."
          [(ngModel)]="token"
          class="input input-bordered w-full text-base px-4 py-3 rounded-lg focus:ring-2 focus:ring-success/50 transition"
        />

        <!-- æŒ‰é’® -->
        <button
          class="btn btn-success w-full py-3 rounded-lg shadow hover:shadow-md transition-all"
          (click)="submitToken()">
          æäº¤
        </button>

      </div>
    </div>

  } @else {
    <div class="grid grid-cols-2 gap-6 mb-8">
      <!-- å®¡æ ¸é€šè¿‡ -->
      <div class="stat place-items-center bg-base-100 rounded-xl shadow-lg  hover:shadow-xl p-4">
        <div class="stat-title text-lg sm:text-xl text-gray-600 font-semibold">å®¡æ ¸é€šè¿‡</div>
        <div class="stat-value text-success text-3xl sm:text-4xl font-bold">{{ passedNum }}</div>
      </div>

      <!-- å¾…å®¡æ ¸ -->
      <div class="stat place-items-center bg-base-100 rounded-xl shadow-lg  hover:shadow-xl p-4">
        <div class="stat-title text-lg sm:text-xl text-gray-600 font-semibold">å¾…å®¡æ ¸</div>
        <div class="stat-value text-error text-3xl sm:text-4xl font-bold">{{ waitingNum }}</div>
      </div>
    </div>


    <app-card
      (reviewed)="onReviewed($event)"
      *ngFor="let sub of waitingList; let i = index;"
      [nextID]="i + 1 < waitingList.length ? waitingList[i + 1].id : ''"
      [review]="true"
      [submission]="sub"
      class="w-full mb-4"
    />

    <div class="card bg-base-100 shadow-xl mt-5 mx-auto max-w-4xl mb-20">
      <figure class="p-4">
        <img src="assets/welcome.webp" class="rounded-xl w-full object-cover" alt="Welcome Image"/>
      </figure>
      <div class="card-body text-center">
        <div class="text-lg font-semibold mb-4">ğŸ¤– ~æ²¡æœ‰æ›´å¤šäº†~ ğŸ¤–</div>
        <div class="flex flex-wrap justify-center gap-2">
          <button (click)="batchAccept()" class="btn btn-success btn-outline">AC</button>
          <button (click)="batchReject()" class="btn btn-warning btn-outline">NA</button>
          <button (click)="removeToken()" class="btn btn-error btn-outline">æ¸…é™¤ token</button>
        </div>
      </div>
    </div>
  }

  <!-- Modal (æ”¾åœ¨æ•´ä¸ª conditional ä¹‹å¤–) -->
  <input class="modal-toggle" id="message" type="checkbox"/>
  <div class="modal">
    <div class="modal-box text-center">
      <h3 class="font-bold text-lg">{{ title }}</h3>
      <p class="py-4">{{ message }}</p>
      <div class="modal-action justify-center">
        <label class="btn btn-success btn-sm" for="message">Yay!</label>
      </div>
    </div>
  </div>
</div>
